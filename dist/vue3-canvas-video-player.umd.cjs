(function(e,v){typeof exports=="object"&&typeof module<"u"?module.exports=v(require("vue")):typeof define=="function"&&define.amd?define(["vue"],v):(e=typeof globalThis<"u"?globalThis:e||self,e.Vue3CanvasVideoPlayer=v(e.Vue))})(this,function(e){"use strict";const v=l=>{const t=parseInt(l),d=Math.floor(t/3600),r=Math.floor(t%3600/60),s=t%60;return`${d<10?"0"+d:d}:${r<10?"0"+r:r}:${s<10?"0"+s:s}`},w=(l,t)=>Math.round(l*t),L=(l,t)=>l/t,z=l=>l===void 0?!1:new Intl.NumberFormat().format(l),o=e.reactive({container:{element:null,fullScreen:!1,type:"overlay",mouseDown:!1,mouseMove:!1,mouseHold:!1},video:{element:null,canvas:null,width:0,height:0,duration:0,currentTime:0,muted:!1,volume:1,playbackRate:1,paused:!0,fps:0},seek:{width:0,total:0,bufferWidth:0},preview:{enabled:!1,element:null,left:0,time:"00:00:00"},range:{start:0,end:0,left:0,width:0,enabled:!1},bbox:{data:{},borderSize:1,borderColor:"rgba(255, 0, 0, 0.5)",fillColor:"rgba(0, 0, 255, 0.5)",enabled:!1},message:{time:1e3,visible:!1,text:""}});let I=!1;function N(){const l=e.computed(()=>o.range.start>0&&o.range.end>0),t=e.computed(()=>o.video.fps>0),d=e.computed(()=>Object.keys(o.bbox.data).length>0),r=()=>{const{video:{element:n,canvas:a,width:i,height:m,duration:g,fps:b},range:{start:k,end:C},bbox:{data:O,fillColor:H,borderSize:D,borderColor:rt}}=o,F=a.getContext("2d");a.width=i,a.height=m,l.value&&(n.currentTime=k);const Q=()=>{const{range:{enabled:lt},bbox:{enabled:st}}=o;F.drawImage(n,0,0,i,m);const q=o.video.currentTime=n.currentTime;if(f(),l.value&&lt?o.seek.width=((q-k)/(C-k)*100).toFixed(10):(o.seek.width=(q/g*100).toFixed(10),n.buffered.length>0&&(o.seek.bufferWidth=n.buffered.end(n.buffered.length-1)/g*100)),t.value&&d.value&&st){const dt=w(q,b),M=O[dt];if(M&&M.length===4){const Y=M[0],Z=M[1],X=M[2]-M[0],ee=M[3]-M[1];F.fillStyle=H,F.fillRect(Y,Z,X,ee),D&&(F.lineWidth=D,F.strokeStyle=rt,F.strokeRect(Y-D/2,Z-D/2,X+D,ee+D))}}n.paused&&Math.floor(o.seek.width)===100&&(o.video.paused=!0),window.requestAnimationFrame(Q)};Q(),window.dispatchEvent(new Event("resize"))},s=n=>{const{video:{element:a,duration:i,fps:m},range:{enabled:g,start:b,end:k}}=o;a.currentTime=l.value&&g?Math.max(Math.min(n,k),b):Math.max(Math.min(n,i),0),V(`Seek ${v(a.currentTime)} ${t.value?`[${z(w(a.currentTime,m))}]`:""} (${l.value&&g?Math.round((a.currentTime-b)/(k-b)*100):Math.round(a.currentTime/i*100)}%)`)},u=({offsetX:n})=>{const{container:{mouseDown:a},video:{duration:i},seek:{total:m},preview:{enabled:g,element:b},range:{enabled:k,start:C,end:O}}=o,H=k?n/m*(O-C)+C:n/m*i;a&&s(H),g&&(b.currentTime=H,o.preview.time=v(H),n<65?o.preview.left=65:n>m-65?o.preview.left=m-65:o.preview.left=n)};let y;const E=({detail:n})=>{if(n===1){const{video:{element:a,paused:i},range:{enabled:m,start:g,end:b}}=o;y=setTimeout(()=>{i?(l.value&&m&&a.currentTime===b&&(a.currentTime=g),a.play()):a.pause(),V(i?"Play":"Pause"),o.video.paused=!i},250)}else n===2&&(clearTimeout(y),U())},p=n=>{const{video:{element:a}}=o,i=Math.max(Math.min(n,1),0);a.volume=o.video.volume=i,V(`Volume ${Math.floor(i*100)}%`)},h=({offsetY:n})=>{const{container:{mouseDown:a}}=o;a&&p((100-n)/100)},x=()=>{const{video:{element:n,muted:a}}=o;n.muted=o.video.muted=!a,V(a?"Unmuted":"Muted")},S=()=>{const{video:{element:n,fps:a}}=o;t.value?s(L(w(n.currentTime,a)+1,a)):s(n.currentTime+1)},$=()=>{const{video:{element:n,fps:a}}=o;t.value?s(L(w(n.currentTime,a)-1,a)):s(n.currentTime-1)};let T;const c=n=>{const{container:{mouseDown:a}}=o;a?T=setInterval(()=>{n?S():$()},60):clearInterval(T)},P=n=>{const{video:{element:a}}=o;a.playbackRate=o.video.playbackRate=n,V(`Playback Rate x${n.toFixed(1)}`)},f=()=>{const{video:{element:n},range:{enabled:a,start:i,end:m}}=o;!(l.value&&a)||(n.currentTime<i&&(n.currentTime=i),n.currentTime>m&&(n.currentTime=m,n.pause(),o.video.paused=!0))},W=()=>{const{video:{duration:n},seek:{total:a},range:{enabled:i,start:m,end:g}}=o;f(),o.range.left=l.value&&i?0:m/n*a,o.range.width=l.value&&i?a:g/n*a-m/n*a},nt=()=>{const{range:{enabled:n}}=o;o.range.enabled=!n,W(),V(n?"Inactive range":"Active range")},ot=()=>{const{bbox:{enabled:n}}=o;o.bbox.enabled=!n,V(n?"Hide bounding box":"Show bounding box")};let j;const V=n=>{const{message:a}=o,{time:i}=a;!i||(a.text=n,a.visible=!0,j&&clearTimeout(j),j=setTimeout(()=>{a.visible=!1},i))},U=()=>{const{container:{element:n}}=o;document.fullscreenElement?document.exitFullscreen():n.requestFullscreen()},G=()=>{const{container:{element:n},preview:{enabled:a}}=o;o.seek.total=n.offsetWidth,l.value&&W(),a&&(o.preview.left=0)},K=({altKey:n,ctrlKey:a,key:i})=>{const{video:{element:m,paused:g,volume:b,fps:k}}=o;if(n&&a){if(i==="g"&&t.value){const C=window.prompt("Go to frame number",w(m.currentTime,k));g&&m.pause(),m.currentTime=L(C,k)}i==="ArrowUp"&&p(b+.05),i==="ArrowDown"&&p(b-.05),i==="ArrowLeft"&&$(),i==="ArrowRight"&&S()}},J=()=>{o.container.fullScreen=Boolean(document.fullscreenElement),V(`${o.container.fullScreen?"Full":"Normal"} screen`)};let A;const at=()=>{A&&clearTimeout(A),o.container.mouseMove=!0,!o.container.mouseHold&&(A=setTimeout(()=>{o.container.mouseMove=!1},1e3))};return e.onMounted(()=>{I||(window.addEventListener("resize",G),window.addEventListener("keydown",K),document.addEventListener("fullscreenchange",J),I=!0)}),e.onUnmounted(()=>{!I||(window.removeEventListener("resize",G),window.removeEventListener("keydown",K),document.removeEventListener("fullscreenchange",J),I=!1)}),{data:o,initialVideo:r,setVideoSeek:u,toggleVideoPlay:E,toggleVideoMute:x,changeVideoVolume:h,changeVideoFrame:c,setVideoPlaybackRate:P,toggleVideoRange:nt,toggleVideoBbox:ot,toggleFullScreen:U,setMessage:V,onContainerMouseMove:at}}const it="",B=(l,t)=>{const d=l.__vccOpts||l;for(const[r,s]of t)d[r]=s;return d},R=l=>(e.pushScopeId("data-v-05360fd3"),l=l(),e.popScopeId(),l),te={class:"cvp-header"},ne=R(()=>e.createElementVNode("span",{style:{opacity:"0.5"}}," / ",-1)),oe={key:0},ae=R(()=>e.createElementVNode("span",{style:{opacity:"0.5"}}," / ",-1)),re=R(()=>e.createElementVNode("span",{style:{opacity:"0.5"}}," / ",-1)),le={key:0},se=R(()=>e.createElementVNode("span",{style:{opacity:"0.5"}}," / ",-1)),de=B({__name:"Header",setup(l){const{data:t}=N(),d=e.computed(()=>t.range.start>0&&t.range.end>0),r=e.computed(()=>t.video.fps>0);return(s,u)=>(e.openBlock(),e.createElementBlock("div",te,[e.createElementVNode("div",{class:e.normalizeClass(["cvp-information",!e.unref(t).range.enabled&&"cvp-information-active"])},[e.createElementVNode("span",null,e.toDisplayString(e.unref(v)(e.unref(t).video.currentTime)),1),ne,e.createElementVNode("span",null,e.toDisplayString(e.unref(v)(e.unref(t).video.duration)),1),e.unref(r)?(e.openBlock(),e.createElementBlock("span",oe,[e.createElementVNode("span",null," [ "+e.toDisplayString(e.unref(z)(e.unref(w)(e.unref(t).video.currentTime,e.unref(t).video.fps))),1),ae,e.createElementVNode("span",null,e.toDisplayString(e.unref(z)(e.unref(w)(e.unref(t).video.duration,e.unref(t).video.fps)))+" ]",1)])):e.createCommentVNode("",!0)],2),e.unref(d)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["cvp-information",e.unref(t).range.enabled&&"cvp-information-active"])},[e.createElementVNode("span",null,e.toDisplayString(e.unref(v)(e.unref(t).video.currentTime)),1),re,e.createElementVNode("span",null,e.toDisplayString(e.unref(v)(e.unref(t).range.end)),1),e.unref(r)?(e.openBlock(),e.createElementBlock("span",le,[e.createElementVNode("span",null," [ "+e.toDisplayString(e.unref(z)(e.unref(w)(e.unref(t).video.currentTime,e.unref(t).video.fps))),1),se,e.createElementVNode("span",null,e.toDisplayString(e.unref(z)(e.unref(w)(e.unref(t).range.end,e.unref(t).video.fps)))+" ]",1)])):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0)]))}},[["__scopeId","data-v-05360fd3"]]),ft="",ie={class:"cvp-main"},ce=["src","muted","autoplay"],fe=B({__name:"Main",props:{src:{type:String,default:!1,required:!0},muted:{type:Boolean,default:!1},autoplay:{type:Boolean,default:!1}},setup(l){const t=l,d=e.ref(null),r=e.ref(null),{data:s,initialVideo:u,toggleVideoPlay:y}=N(),E=()=>{Object.assign(s,{video:{...s.video,element:d.value,canvas:r.value,width:d.value.videoWidth,height:d.value.videoHeight,duration:d.value.duration,paused:!(t.muted===!0&&t.autoplay===!0)}}),u()};return(p,h)=>(e.openBlock(),e.createElementBlock("div",ie,[e.createElementVNode("video",{class:"cvp-video",ref_key:"video",ref:d,src:l.src,muted:l.muted,autoplay:l.autoplay,onLoadedmetadata:E},null,40,ce),e.createElementVNode("canvas",{class:"cvp-canvas",ref_key:"canvas",ref:r,onClick:h[0]||(h[0]=(...x)=>e.unref(y)&&e.unref(y)(...x))},null,512)]))}},[["__scopeId","data-v-760255dc"]]),pt="",me={class:"cvp-seek"},pe={class:"cvp-seek-drag"},_e=["src"],he={class:"cvp-seek-preview-time"},ue=B({__name:"Seek",setup(l){const t=e.ref(null),d=e.ref(null),{data:r,setVideoSeek:s}=N(),u=e.computed(()=>r.range.start>0&&r.range.end>0),y=()=>{const{video:{width:E,height:p},preview:{enabled:h}}=r;if(!h)return;const x=d.value.getContext("2d"),S=E*.3,$=p*.3;d.value.width=S,d.value.height=$,Object.assign(r,{preview:{...r.preview,element:t.value}});const T=()=>{!t.value||(x.imageSmoothingEnabled=!0,x.drawImage(t.value,0,0,S,$),window.requestAnimationFrame(T))};T()};return(E,p)=>(e.openBlock(),e.createElementBlock("div",me,[e.createElementVNode("div",pe,[e.createElementVNode("div",{class:"cvp-seek-area",onMousedown:p[0]||(p[0]=e.withModifiers(h=>{e.unref(r).container.mouseDown=!0,e.unref(s)(h)},["self"])),onMousemove:p[1]||(p[1]=(...h)=>e.unref(s)&&e.unref(s)(...h)),onMouseup:p[2]||(p[2]=h=>e.unref(r).container.mouseDown=!1),onMouseleave:p[3]||(p[3]=h=>e.unref(r).container.mouseDown=!1)},[e.createElementVNode("div",{class:"cvp-seek-buffer",style:e.normalizeStyle({width:`${e.unref(r).seek.bufferWidth}%`})},null,4),e.createElementVNode("div",{class:"cvp-seek-bar",style:e.normalizeStyle({width:`${e.unref(r).seek.width}%`})},null,4),e.unref(u)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"cvp-seek-range",style:e.normalizeStyle({left:`${e.unref(r).range.left}px`,width:`${e.unref(r).range.width}px`})},null,4)):e.createCommentVNode("",!0)],32)]),e.unref(r).preview.enabled?(e.openBlock(),e.createElementBlock("div",{key:0,class:"cvp-seek-preview",style:e.normalizeStyle({left:`${e.unref(r).preview.left}px`})},[e.createElementVNode("video",{class:"cvp-seek-preview-video",ref_key:"video",ref:t,src:e.unref(r).video.src,onLoadedmetadata:y},null,40,_e),e.createElementVNode("canvas",{class:"cvp-seek-preview-canvas",ref_key:"canvas",ref:d},null,512),e.createElementVNode("div",he,e.toDisplayString(e.unref(r).preview.time),1)],4)):e.createCommentVNode("",!0)]))}},[["__scopeId","data-v-ff68ff65"]]),ht="",_=l=>(e.pushScopeId("data-v-98c973d0"),l=l(),e.popScopeId(),l),ge={class:"cvp-controller"},be=["title"],ke={key:0,class:"cvp-controller-icon",viewBox:"-2 -2 28 28","stroke-width":"1",stroke:"#ffffff",fill:"none"},ve=[_(()=>e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),_(()=>e.createElementVNode("path",{d:"M7 4v16l13 -8z"},null,-1))],ye={key:1,class:"cvp-controller-icon",viewBox:"0 0 24 24","stroke-width":"1",stroke:"#ffffff",fill:"none"},we=[_(()=>e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),_(()=>e.createElementVNode("rect",{x:"6",y:"5",width:"4",height:"14",rx:"1"},null,-1)),_(()=>e.createElementVNode("rect",{x:"14",y:"5",width:"4",height:"14",rx:"1"},null,-1))],Ee={class:"cvp-controller-volume"},Ve=["title"],xe={key:0,class:"cvp-controller-icon",viewBox:"-2 -2 28 28","stroke-width":"1",stroke:"#ffffff",fill:"none"},Me=[_(()=>e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),_(()=>e.createElementVNode("path",{d:"M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a0.8 .8 0 0 1 1.5 .5v14a0.8 .8 0 0 1 -1.5 .5l-3.5 -4.5"},null,-1)),_(()=>e.createElementVNode("path",{d:"M16 10l4 4m0 -4l-4 4"},null,-1))],Ne={key:1,class:"cvp-controller-icon",viewBox:"-2 -2 28 28","stroke-width":"1",stroke:"#ffffff",fill:"none"},Be=[_(()=>e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),_(()=>e.createElementVNode("path",{d:"M15 8a5 5 0 0 1 0 8"},null,-1)),_(()=>e.createElementVNode("path",{d:"M17.7 5a9 9 0 0 1 0 14"},null,-1)),_(()=>e.createElementVNode("path",{d:"M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a0.8 .8 0 0 1 1.5 .5v14a0.8 .8 0 0 1 -1.5 .5l-3.5 -4.5"},null,-1))],Se={class:"cvp-controller-volume-drag"},$e=[_(()=>e.createElementVNode("svg",{class:"cvp-controller-icon",viewBox:"-1 -1 26 26","stroke-width":"1",stroke:"#ffffff",fill:"none"},[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.createElementVNode("path",{d:"M20 5v14l-12 -7z"}),e.createElementVNode("line",{x1:"4",y1:"5",x2:"4",y2:"19"})],-1))],Te=[_(()=>e.createElementVNode("svg",{class:"cvp-controller-icon",viewBox:"-1 -1 26 26","stroke-width":"1",stroke:"#ffffff",fill:"none"},[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.createElementVNode("path",{d:"M4 5v14l12 -7z"}),e.createElementVNode("line",{x1:"20",y1:"5",x2:"20",y2:"19"})],-1))],Ce=_(()=>e.createElementVNode("div",{style:{flex:"1"}},null,-1)),De={class:"cvp-controller-playback-rate"},Fe={class:"cvp-controller-playback-rate-text"},ze={class:"cvp-controller-playback-rate-list"},He={class:"cvp-controller-playback-rate-item"},Ie=["onClick"],Re=["title"],Pe={key:0,class:"cvp-controller-icon",viewBox:"-4 -4 32 32","stroke-width":"1",stroke:"#ffffff",fill:"none"},Le=[e.createStaticVNode('<path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-98c973d0></path><path d="M3 12h7l-3 -3m0 6l3 -3" data-v-98c973d0></path><path d="M21 12h-7l3 -3m0 6l-3 -3" data-v-98c973d0></path><path d="M9 6v-3h6v3" data-v-98c973d0></path><path d="M9 18v3h6v-3" data-v-98c973d0></path>',5)],We={key:1,class:"cvp-controller-icon",viewBox:"-4 -4 32 32","stroke-width":"1",stroke:"#ffffff",fill:"none"},je=[e.createStaticVNode('<path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-98c973d0></path><path d="M10 12h-7l3 -3m0 6l-3 -3" data-v-98c973d0></path><path d="M14 12h7l-3 -3m0 6l3 -3" data-v-98c973d0></path><path d="M3 6v-3h18v3" data-v-98c973d0></path><path d="M3 18v3h18v-3" data-v-98c973d0></path>',5)],Ae=["title"],Oe=[e.createStaticVNode('<svg class="cvp-controller-icon" viewBox="-4 -4 32 32" stroke-width="1" stroke="#ffffff" fill="none" data-v-98c973d0><path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-98c973d0></path><circle cx="5" cy="5" r="2" data-v-98c973d0></circle><circle cx="19" cy="5" r="2" data-v-98c973d0></circle><circle cx="5" cy="19" r="2" data-v-98c973d0></circle><circle cx="19" cy="19" r="2" data-v-98c973d0></circle><line x1="5" y1="7" x2="5" y2="17" data-v-98c973d0></line><line x1="7" y1="5" x2="17" y2="5" data-v-98c973d0></line><line x1="7" y1="19" x2="17" y2="19" data-v-98c973d0></line><line x1="19" y1="7" x2="19" y2="17" data-v-98c973d0></line></svg>',1)],qe=["title"],Ue={key:0,class:"cvp-controller-icon",viewBox:"0 0 24 24","stroke-width":"1",stroke:"#ffffff",fill:"none"},Ge=[e.createStaticVNode('<path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-98c973d0></path><path d="M15 19v-2a2 2 0 0 1 2 -2h2" data-v-98c973d0></path><path d="M15 5v2a2 2 0 0 0 2 2h2" data-v-98c973d0></path><path d="M5 15h2a2 2 0 0 1 2 2v2" data-v-98c973d0></path><path d="M5 9h2a2 2 0 0 0 2 -2v-2" data-v-98c973d0></path>',5)],Ke={key:1,class:"cvp-controller-icon",viewBox:"-2 -2 28 28","stroke-width":"1",stroke:"#ffffff",fill:"none"},Je=[e.createStaticVNode('<path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-98c973d0></path><path d="M4 8v-2a2 2 0 0 1 2 -2h2" data-v-98c973d0></path><path d="M4 16v2a2 2 0 0 0 2 2h2" data-v-98c973d0></path><path d="M16 4h2a2 2 0 0 1 2 2v2" data-v-98c973d0></path><path d="M16 20h2a2 2 0 0 0 2 -2v-2" data-v-98c973d0></path>',5)],Qe=B({__name:"Controller",setup(l){const{data:t,toggleVideoPlay:d,toggleVideoMute:r,changeVideoVolume:s,changeVideoFrame:u,setVideoPlaybackRate:y,toggleVideoRange:E,toggleVideoBbox:p,toggleFullScreen:h}=N(),x=e.computed(()=>t.range.start>0&&t.range.end>0),S=e.computed(()=>t.video.fps>0),$=e.computed(()=>Object.keys(t.bbox.data).length>0);return(T,c)=>{var P;return e.openBlock(),e.createElementBlock("div",ge,[e.createElementVNode("button",{class:"cvp-controller-button",title:e.unref(t).video.paused?"Play":"Pause",onClick:c[0]||(c[0]=(...f)=>e.unref(d)&&e.unref(d)(...f))},[e.unref(t).video.paused?(e.openBlock(),e.createElementBlock("svg",ke,ve)):(e.openBlock(),e.createElementBlock("svg",ye,we))],8,be),e.createElementVNode("div",Ee,[e.createElementVNode("button",{class:"cvp-controller-button",title:e.unref(t).video.muted?"Unmute":"Mute",onClick:c[1]||(c[1]=(...f)=>e.unref(r)&&e.unref(r)(...f))},[e.unref(t).video.muted?(e.openBlock(),e.createElementBlock("svg",xe,Me)):(e.openBlock(),e.createElementBlock("svg",Ne,Be))],8,Ve),e.createElementVNode("div",Se,[e.createElementVNode("div",{class:"cvp-controller-volume-area",onMousedown:c[2]||(c[2]=e.withModifiers(f=>{e.unref(t).container.mouseDown=!0,e.unref(s)(f)},["self"])),onMousemove:c[3]||(c[3]=(...f)=>e.unref(s)&&e.unref(s)(...f)),onMouseup:c[4]||(c[4]=f=>e.unref(t).container.mouseDown=!1),onMouseleave:c[5]||(c[5]=f=>e.unref(t).container.mouseDown=!1)},[e.createElementVNode("div",{class:"cvp-controller-volume-bar",style:e.normalizeStyle({height:`${e.unref(t).video.volume*100}%`})},null,4)],32)])]),e.createElementVNode("button",{class:"cvp-controller-button",title:"Backward",onMousedown:c[6]||(c[6]=f=>{e.unref(t).container.mouseDown=!0,e.unref(u)(!1)}),onMouseup:c[7]||(c[7]=f=>{e.unref(t).container.mouseDown=!1,e.unref(u)(!1)})},$e,32),e.createElementVNode("button",{class:"cvp-controller-button",title:"Forward",onMousedown:c[8]||(c[8]=f=>{e.unref(t).container.mouseDown=!0,e.unref(u)(!0)}),onMouseup:c[9]||(c[9]=f=>{e.unref(t).container.mouseDown=!1,e.unref(u)(!0)})},Te,32),Ce,e.createElementVNode("div",De,[e.createElementVNode("div",Fe,"x"+e.toDisplayString(((P=e.unref(t).video.playbackRate)==null?void 0:P.toFixed(1))||"1.0"),1),e.createElementVNode("ul",ze,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList([.1,.5,1,1.5,2,5],f=>(e.openBlock(),e.createElementBlock("li",He,[e.createElementVNode("button",{class:"cvp-controller-playback-rate-button",onClick:W=>e.unref(y)(f)},e.toDisplayString(f.toFixed(1)),9,Ie)]))),256))])]),e.unref(x)?(e.openBlock(),e.createElementBlock("button",{key:0,class:"cvp-controller-button",title:e.unref(t).range.enabled?"Reset range":"Set range",onClick:c[10]||(c[10]=(...f)=>e.unref(E)&&e.unref(E)(...f))},[e.unref(t).range.enabled?(e.openBlock(),e.createElementBlock("svg",Pe,Le)):(e.openBlock(),e.createElementBlock("svg",We,je))],8,Re)):e.createCommentVNode("",!0),e.unref(S)&&e.unref($)?(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(["cvp-controller-button",e.unref(t).bbox.enabled&&"cvp-controller-button-active"]),title:e.unref(t).bbox.enabled?"Hide bounding box":"Show bounding box",onClick:c[11]||(c[11]=(...f)=>e.unref(p)&&e.unref(p)(...f))},Oe,10,Ae)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"cvp-controller-button",title:e.unref(t).container.fullScreen?"Normal screen":"Full screen",onClick:c[12]||(c[12]=(...f)=>e.unref(h)&&e.unref(h)(...f))},[e.unref(t).container.fullScreen?(e.openBlock(),e.createElementBlock("svg",Ue,Ge)):(e.openBlock(),e.createElementBlock("svg",Ke,Je))],8,qe)])}}},[["__scopeId","data-v-98c973d0"]]),Ht="",Ye=B({__name:"index",setup(l){const{data:t,onContainerMouseMove:d}=N();return(r,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["cvp-footer",e.unref(t).container.mouseMove&&"cvp-footer-active"]),onMouseenter:s[0]||(s[0]=u=>e.unref(t).container.mouseHold=!0),onMouseleave:s[1]||(s[1]=u=>{e.unref(t).container.mouseHold=!1,e.unref(d)()})},[e.createVNode(ue),e.createVNode(Qe)],34))}},[["__scopeId","data-v-627ed2ba"]]),Rt="",Ze={class:"cvp-message"},Xe=["innerHTML"],et=B({__name:"Message",setup(l){const{data:t}=N();return(d,r)=>(e.openBlock(),e.createElementBlock("div",Ze,[e.createElementVNode("div",{class:e.normalizeClass(["cvp-message-text",e.unref(t).message.visible?"cvp-message-text-show":"cvp-message-text-hide"]),innerHTML:e.unref(t).message.text},null,10,Xe)]))}},[["__scopeId","data-v-1ecb3b3a"]]),Lt="",tt=["data-dark-mode","data-type"];return B({__name:"Vue3CanvasVideoPlayer",props:{src:{type:String,default:"",required:!0},muted:{type:Boolean,default:!1},autoplay:{type:Boolean,default:!1},range:{type:Array,validator:l=>!l.length||l.length===2&&l.every(t=>typeof t=="number"),default:()=>[0,0]},fps:{type:Number,default:0},bbox:{type:Object,default:()=>({data:{},borderSize:1,borderColor:"rgba(255, 0, 0, 0.5)",fillColor:"rgba(0, 0, 255, 0.5)"})},type:{type:String,default:"overlay"},messageTime:{type:Number,default:1e3},preview:{type:Boolean,default:!1},darkMode:{type:Boolean,default:!0}},setup(l){const t=l,d=e.ref(null),{data:r,onContainerMouseMove:s}=N();return e.onMounted(()=>{Object.assign(r,{container:{...r.container,element:d.value,type:t.type},video:{...r.video,src:t.src,muted:t.muted,fps:t.fps},preview:{...r.preview,enabled:t.preview},range:{...r.range,start:t.range[0],end:t.range[1],enabled:t.range[0]>0&&t.range[1]>0},bbox:{...r.bbox,...t.bbox,enabled:Object.keys(t.bbox.data).length>0},message:{...r.message,time:t.messageTime}}),r.container.type==="overlay"&&r.container.element.addEventListener("mousemove",s)}),e.onBeforeUnmount(()=>{r.container.type==="overlay"&&r.container.element.removeEventListener("mousemove",s)}),(u,y)=>(e.openBlock(),e.createElementBlock("div",{id:"vue3-canvas-video-player",ref_key:"container",ref:d,"data-dark-mode":l.darkMode,"data-type":t.type},[e.createVNode(de),e.createVNode(fe,{src:t.src,muted:t.muted,autoplay:t.autoplay},null,8,["src","muted","autoplay"]),e.createVNode(Ye),e.createVNode(et)],8,tt))}},[["__scopeId","data-v-cfdbdca7"]])});
